%%PACKAGES
\usepackage{mathtools}
\usepackage{pdfpages}
\usepackage{dcolumn}
\usepackage[listings,skins,breakable]{tcolorbox}
\usepackage{cancel}
\usepackage{graphicx}
\usepackage{grffile}
\usepackage{tabularx}
\usepackage{setspace}
\usepackage{moresize}
\usepackage{amsmath,amsthm,amssymb}
\usepackage[hyphens]{url} \usepackage{natbib}
\usepackage[font=normalsize,labelfont=bf]{caption}
\usepackage{titlesec}
\usepackage[margin=1in]{geometry}
\usepackage{setspace}
\usepackage{hyperref}
\hypersetup{colorlinks=true,urlcolor=blue,citecolor=red}
\usepackage{enumerate}% http://ctan.org/pkg/enumerate %Supports lowercase Roman-letter enumeration
\usepackage{verbatim} %Package with \begin{comment} environment
\usepackage{physics}
\usepackage{lscape}
%\usepackage{tikz}
%\usepackage{tikz-3dplot}
%\usepackage{tkz-euclide}
\usepackage{pgfplots}
\pgfplotsset{compat = newest}
%\usetikzlibrary{automata,positioning}
\usepgfplotslibrary{external}
%\tikzexternalize
%\usetikzlibrary{calc,math}
\usepackage{listings}
\usepackage{upquote}
\usepackage{booktabs} %Package with \toprule and \bottomrule
\usepackage{etoc}     %Package with \localtableofcontents
\usepackage{multicol}
\usepackage{multirow}
\usepackage{bm}
\usepackage{placeins} %Package with \FloatBarrier
\setlength{\parskip}{0.5em} 
\usepackage{subcaption}
\captionsetup{compatibility=false}
\usepackage{pdflscape}
\usepackage{makecell}
\usepackage{xr}
\usepackage{bbm}
%\externaldocument{../paper/paper}
%\usepackage{enumitem}

% USE FOR SHRINKING SPACE IN CHEATSHEET
%\setlist[itemize]{noitemsep, topsep=1pt, parsep=1pt, partopsep=1pt}
%\setlist[enumerate]{noitemsep, topsep=1pt, parsep=1pt, partopsep=1pt}

\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\lstset{language=bash,
  frame=tb,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=none,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=false,
  tabsize=3
}

\newtcolorbox{definition}[1]{
  breakable,
  colback=blue!10, % Background color
  colframe=blue!50, % Border color
  fonttitle=\bfseries,
  title={#1}, % Incorporate the argument into the title
  arc=5mm, % Corner radius
  %enhanced, % Allows for line breaks in the box content
  boxrule=0.5mm, % Border thickness
  %label={#1}
}

\newtcolorbox{theorem}[1]{
  breakable,
  colback=red!10, % Background color
  colframe=red!50, % Border color
  fonttitle=\bfseries,
  title={Theorem: #1}, % Incorporate the argument into the title
  arc=5mm, % Corner radius
  %enhanced, % Allows for line breaks in the box content
  boxrule=0.5mm, % Border thickness
  %label={#1}
}

%\newcommand{\elementslist}{}
%\newcommand{\addelementlist}[2]{%
%  \g@addto@macro\elementslist{\hyperref[#1]{#2: #1}\par}
%}

\newcommand{\Cb}[3]{%
  \begin{cb}{#1}{#2}
    %\addelementlist{#1}{}
    #3
  \end{cb}
}

\newtcolorbox{cb}[2]{
  breakable,
  colback=#2!10, % Background color
  colframe=#2!30, % Border color
  fonttitle=\bfseries,
  coltitle=#2!20!black,
  title={#1}, % Incorporate the argument into the title
  arc=0mm, % Corner radius
  %enhanced, % Allows for line breaks in the box content
  boxrule=0.0mm, % Border thickness
  top=-1mm, bottom=-1mm, left=-1mm, right=-1mm, % Adjust padding
  %boxsep=1mm, % Space between content and frame
  %leftmargin=2mm, rightmargin=2mm, % Adjust margins
  %before title=\vspace{-2mm}, % Space above title
  %after title=\vspace{-1mm} % Space below title
  %label={#1}
}

\newcommand{\Theorem}[2]{%
  \refstepcounter{theoremcounter}
  \begin{theorem}{#1}
      %\addelementlist{#1}{Theorem}
      \addcontentsline{toc}{subsubsection}{\thetheoremcounter : #1}
    #2
  \end{theorem}
}

\newcommand{\Lemma}[2]{%
  \refstepcounter{lemmacounter}
  \begin{lemma}{#1}
      %\addelementlist{#1}{Lemma}
      \addcontentsline{toc}{subsubsection}{\thelemmacounter : #1}
    #2
  \end{lemma}
}

\newcommand{\Example}[2]{%
  \refstepcounter{examplecounter}
  \begin{example}{Example \theexamplecounter: #1}
      %\addelementlist{#1}{Example}
      \addcontentsline{toc}{subsubsection}{\theexamplecounter: #1}
    #2
  \end{example}
}

\newcommand{\Problem}[2]{%
  \refstepcounter{problemcounter}
  \begin{problem}{Problem \theproblemcounter: #1}
      %\addelementlist{#1}{Problem}
      \addcontentsline{toc}{subsubsection}{\theproblemcounter: #1}
    #2
  \end{problem}
}

\newcommand{\prob}[2]{%
  \begin{problem}{Problem #1}
    #2
  \end{problem}
}


\newcommand{\Prop}[2]{%
  \refstepcounter{propcounter}
  \begin{tool}{Proposition \thepropcounter: #1}
      %\addelementlist{#1}{Fact}
      \addcontentsline{toc}{subsubsection}{\thepropcounter: #1}
    #2
  \end{tool}
}

\newcommand{\Fact}[2]{%
  \refstepcounter{factcounter}
  \begin{tool}{Fact \thefactcounter: #1}
      %\addelementlist{#1}{Fact}
      \addcontentsline{toc}{subsubsection}{\thefactcounter: #1}
    #2
  \end{tool}
}
\newcommand{\Definition}[2]{%
  \refstepcounter{defcounter}
  \begin{definition}{Definition \thedefcounter: #1}
    %\addelementlist{#1}{Definition}
      \addcontentsline{toc}{subsubsection}{\thedefcounter: #1}
    #2
  \end{definition}
}

\newtcolorbox{lemma}[1]{
  breakable,
  colback=mauve!10, % Background color
  colframe=mauve!50, % Border color
  fonttitle=\bfseries,
  title={Lemma: #1}, % Incorporate the argument into the title
  arc=5mm, % Corner radius enhanced, % Allows for line breaks in the box content
  boxrule=0.5mm, % Border thickness,
  %label={#1}
}

\newtcolorbox{tool}[1]{
  breakable,
  colback=orange!10, % Background color
  colframe=orange!50, % Border color
  fonttitle=\bfseries,
  title={ #1}, % Incorporate the argument into the title
  arc=5mm, % Corner radius
  %enhanced, % Allows for line breaks in the box content
  boxrule=0.5mm, % Border thickness
  %label={#1}
}

\newtcolorbox{example}[1]{
  breakable,
  colback=dkgreen!10, % Background color
  colframe=dkgreen!50, % Border color
  fonttitle=\bfseries,
  title={ #1}, % Incorporate the argument into the title
  arc=5mm, % Corner radius
  %enhanced, % Allows for line breaks in the box content
  boxrule=0.5mm, % Border thickness
  breakable,
  %label={#1}
}

\newcounter{problemcounter}
\renewcommand{\theproblemcounter}{Q.\arabic{problemcounter}}
\newcounter{propcounter}
\renewcommand{\thepropcounter}{P.\arabic{propcounter}}
\newcounter{factcounter}
\renewcommand{\thefactcounter}{F.\arabic{factcounter}}
\newcounter{examplecounter}
\renewcommand{\theexamplecounter}{E.\arabic{examplecounter}}
\newcounter{defcounter}
\renewcommand{\thedefcounter}{D.\arabic{defcounter}}
\newcounter{theoremcounter}
\renewcommand{\thetheoremcounter}{T.\arabic{theoremcounter}}
\newcounter{lemmacounter}
\renewcommand{\thelemmacounter}{L.\arabic{lemmacounter}}
\newtcolorbox{problem}[1]{
  breakable,
  colback=red!10, % Background color
  colframe=red!50, % Border color
  fonttitle=\bfseries,
  title={ #1}, % Incorporate the argument into the title
  arc=5mm, % Corner radius
  %enhanced, % Allows for line breaks in the box content
  boxrule=0.5mm, % Border thickness
  %label={#1}
}


%%FORMATTING
\onehalfspacing
\numberwithin{equation}{section}
\numberwithin{figure}{section}
\numberwithin{table}{section}
\allowdisplaybreaks
%LOGBOOK
\begin{document}

%TABLE OF CONTENTS
%\renewcommand{\thechapter}{\Alph{chapter}}
\renewcommand{\qedsymbol}{$\blacksquare$}
\setcounter{tocdepth}{3}
\etocsettocstyle{}{} % from now on only local tocs
